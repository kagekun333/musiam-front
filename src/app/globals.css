@import "tailwindcss";

/* ===== ベース ===== */
html, body { height: 100%; overflow-x: hidden !important; }
:root { color-scheme: dark; }
.prose-tight p { line-height: 1.7; }

/* スクロールバーを非表示（スクロール自体は可能） */
html, body {
  overflow-y: auto;
  -ms-overflow-style: none;    /* IE/旧Edge */
  scrollbar-width: none;       /* Firefox */
}
html::-webkit-scrollbar, body::-webkit-scrollbar {
  width: 0 !important; height: 0 !important; background: transparent;
}

/* ===== ページ背景（宇宙） ===== */
html:has(.page-home), body:has(.page-home){ background:#070e18; color:#e5e7eb; }
.page-home{
  position:relative; min-height:100svh; isolation:isolate; color:#e5e7eb;
  overflow: clip; /* はみ出しをスクロール領域にしない */
  background:
    radial-gradient(1100px 620px at 14% -10%, rgba(56,189,248,.14), transparent 60%),
    radial-gradient(900px 520px  at 88%  10%, rgba(99,102,241,.12), transparent 55%),
    linear-gradient(180deg, #07101a 0%, #0a1320 58%, #0a0f18 100%);
}
/* 右の斜めは不要 */
.page-home::before{ display:none !important; }

/* 星粒（二層 + ヘッダーマスク） */
/* Canvas星空の固定レイヤ */
.star-canvas{
  position: fixed;
  inset: 0;
  z-index: 0;          /* 背景に固定。heroやcardsより下 */
  width: 100%;
  height: 100%;
  pointer-events: none; /* クリックは通す */
}


/* 装飾ぼかし（レイアウト非干渉：fixed） */
.page-home .cosmic-orn1,
.page-home .cosmic-orn2{
  position: fixed; pointer-events: none; filter: blur(40px); z-index: 0;
}
.page-home .cosmic-orn1{
  top:-200px; left:50%; width:900px; height:900px; transform:translateX(-50%);
  background:radial-gradient(circle at 50% 50%, rgba(56,189,248,.18), rgba(99,102,241,.12) 45%, transparent 60%);
}
.page-home .cosmic-orn2{
  right:-120px; bottom:-10px; width:520px; height:520px; filter:blur(48px);
  background:radial-gradient(circle at 30% 70%, rgba(59,130,246,.10), rgba(99,102,241,.08) 40%, transparent 65%);
}

/* ===== Wordmark（伯爵 MUSIAM） ===== */
.hero{ position:relative; z-index:1; }
.hero--tight{ max-width:1200px; margin:0 auto; padding:36px 24px 8px; container-type:inline-size; }
.wordmark{
  position:relative; display:inline-flex; align-items:baseline;
  gap: clamp(.22em, 1cqi, .35em);
  white-space:nowrap; line-height:1; letter-spacing:-.02em; font-weight:900;
  font-size: clamp(36px, 10cqi, 92px);
  text-rendering:optimizeLegibility; font-kerning:normal; font-feature-settings:"palt" 1;
  filter: drop-shadow(0 2px 10px rgba(110,140,255,.10));
}
@supports not (container-type:inline-size){
  .wordmark{ font-size: clamp(36px, 6.2vw, 92px); }
}
.wordmark-jp{
  background:linear-gradient(180deg,#fff 0%, #eef2ff 70%, #d8e4ff 100%);
  -webkit-background-clip:text; background-clip:text; color:transparent;
  filter: drop-shadow(0 1px 0 rgba(255,255,255,.22)) drop-shadow(0 6px 18px rgba(120,150,255,.12));
}
.wordmark-en{
  text-transform:uppercase; font-weight:800;
  letter-spacing: clamp(.08em, 1cqi, .14em);
  background:radial-gradient(120% 120% at 50% 0%, #fff 0%, #e9efff 45%, #d3ddff 100%);
  -webkit-background-clip:text; background-clip:text; color:transparent;
  text-shadow: 0 0 24px rgba(110,140,255,.18), 0 2px 14px rgba(9,15,30,.30);
}
.wordmark::after{
  content:""; position:absolute; left:0; bottom:-12px;
  width: clamp(58px, 9cqi, 100px); height:1px;
  background:linear-gradient(90deg, rgba(229,231,235,.85), rgba(229,231,235,.35) 55%, transparent 100%);
  opacity:.36;
}

/* ===== Gates（常に3列） ===== */
.gates-wrap{ position:relative; z-index:1; max-width:1200px; margin:0 auto; padding:0 24px 16px; }
.gates-title{ font-weight:900; margin:8px 0 16px; font-size:32px; letter-spacing:.02em; }

.gates-grid{
  list-style:none; padding:0; margin:0;
  display:grid; gap: clamp(12px, 2vw, 22px);
  grid-template-columns: repeat(3, minmax(0, 1fr));
}

.gate-link{ text-decoration:none; color:inherit; display:block; }
.gate-card{
  border-radius:18px; overflow:hidden;
  border:1px solid rgba(255,255,255,.06);
  background:rgba(24,24,27,.50);
  box-shadow:0 6px 20px rgba(0,0,0,.28);
  container-type: inline-size; /* ENピル制御用 */
}
.media.square{ position:relative; aspect-ratio:1/1; }
.gate-img{ object-fit:cover; transition:transform .35s, filter .35s; }
.gate-card:hover .gate-img{ transform:scale(1.02); filter:brightness(1.04); }

/* キャプションは画像の外・1行省略 */
.gate-caption{ padding:12px 14px 14px; position:static !important; background:transparent !important; }
.gate-title{
  display:flex; align-items:center; justify-content:space-between;
  gap:6px; white-space:nowrap; min-width:0;
}
.gate-title-ja{
  min-width:0; font-weight:800; line-height:1.15;
  font-size: clamp(.95rem, 1.0vw, 1.05rem);
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* ==== EN ピル：常に表示。カード幅が狭いほど小さく、極小のみ隠す ==== */
.gates-grid .gate-title-en{
  display:inline-block !important;
  flex:0 0 auto; white-space:nowrap; font-weight:600; font-size:.76rem; opacity:.85;
  padding:.08rem .48rem; border-radius:999px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(24,24,27,.50); backdrop-filter:saturate(120%) blur(3px);
  transition: font-size .15s ease, padding .15s ease, letter-spacing .15s ease;
}
@container (max-width: 340px){
  .gates-grid .gate-title-en{ font-size:.72rem; letter-spacing:.02em; padding:.06rem .44rem; }
}
@container (max-width: 300px){
  .gates-grid .gate-title-en{ font-size:.66rem; padding:.04rem .40rem; }
}
@container (max-width: 260px){
  .gates-grid .gate-title-en{ font-size:.60rem; padding:.02rem .36rem; }
}
@container (max-width: 210px){
  .gates-grid .gate-title-en{ display:none !important; } /* 本当に極小だけ */
}
/* コンテナクエリ非対応のフォールバック：常に表示 */
@supports not (container-type: inline-size){
  .gates-grid .gate-title-en{ display:inline-block !important; }
}

/* 説明：1行で省略 */
.gate-desc{
  margin-top:4px; color:#d7d9e1; font-size:.9rem;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* 旧オーバーレイ演出は封印（安全網） */
.gate-grad, .gate-meta, .gate-glow{ display:none !important; }

/* A11y */
.gate-link:focus-visible{ outline:none; }
.gate-link:focus-visible .gate-card{ box-shadow:0 0 0 2px rgba(99,102,241,.7), 0 0 0 8px rgba(99,102,241,.25); }

/* ===== 右下ウォーターマーク ===== */
.corner-mark{
  position:fixed; right:18px; bottom:18px; z-index:5; pointer-events:none;
  width:72px; height:72px; opacity:.60;
  background-image:url("/brand/abi-seal.png"); /* 透明PNG推奨 */
  background-size:contain; background-repeat:no-repeat; background-position:center;
  filter: drop-shadow(0 2px 10px rgba(0,0,0,.35));
  /* 金色をもう少し映えさせたいなら↓
     mix-blend-mode: screen; opacity:.68; */
}
@media (max-width: 640px){
  .corner-mark{ width:56px; height:56px; opacity:.50; }
}
